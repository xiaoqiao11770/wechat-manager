#type: node
#context: dop
#internal: smokeconfigureobject
#icon: DOP/smokeobject

= Smoke Configure Object =

"""Attaches the appropriate data for Smoke Objects to an object."""

The Smoke Configure Object DOP takes a simulation object and attaches
the data which is needed for it to be used as a Smoke Object.

This DOP is very similar to the [Smoke Object|Node:dop/smokeobject], except it allows you to explicitly control the creation of the object using another DOP, such as
the [Empty Object DOP|Node:dop/emptyobject]. This can be used for more advanced instancing or creating objects every 10 frames.


@parameters
    [Include:standard_gas_divisions]

    Closed Boundaries:
	The velocity field can be clamped to prevent any smoke from
	entering or leaving the box. 
	
	If closed boundaries is not
	set, the velocity on the boundary will be allowed to vary,
	allowing smoke to leave the box.

	X, Y, Z:
	    When closed boundaries is set, these select which
	    sides will be closed.

    == Guides ==

        Each of the fields that define the smoke simulation can be
        visualized in a number of ways.  The help for the [Scalar Field
        Visualization|Node:dop/scalarfieldvisualization] or [Vector Field Visualization|Node:dop/vectorfieldvisualization] provides more
        details about how these work.

    == Initial Data ==

        Density SOP Path:
            This is a path to the SOP that will be used to initialize
            the density subdata. 
            
            It should be a volume object, such as
            that generated by the [Iso Offset SOP|Node:sop/isooffset] with the __Output Type__ set to Fog Volume.

	Scale:
	    The per-path scale option lets you pre-scale the SOP
	    volumes before they are applied.  This is very useful for
	    boosting the initial temperature amounts, for example.
        Temperature SOP Path:
            The SOP to initialize the temperature data with. The
            temperature field is used by the internal buoyancy forces in
            the [Smoke Solver|Node:dop/smokesolver].
        Fuel SOP Path:
            The SOP to initialize the fuel data with. The
	    fuel field is used by the old combustion model in [Smoke
	    Solver|Node:dop/smokesolver].
	Velocity SOP Path:
	    The path to the SOP that will initialize the velocity of
	    the smoke.  It should be three volume primitives which
	    store the x, y, and z components of the initial velocity
	    field.
        Use Object Transform:
            When sampling the density SOP, determines if the relative
            transform between the density SOP and the DOP simulation
            should be taken into account.
        Wind Tunnel Direction:
            The velocity field will be initialized to this constant
            external value. Furthermore, its end conditions will be set
            to this value. This can create a wind-tunnel type effect.
            
            A non-zero external direction will allow smoke to leave the
            box, even if closed boundaries are set, as the boundary
            velocity will be clamped to the non-zero value.

	Border Type:
	    The behavior when the field is sampled outside of its
	    defined box.

	    Constant:
		The initial value will be returned.
	    Repeat:
		The field will wrap, returning values from the
		opposite side of the field.
	    Streak:
		The value at the edge of the field closest to the
		sample will be returned.
	Add Rest Field:
	    Adds an extra field called "rest" which can be used to
	    store rest positions for shaders.

	Scale Rest Res:
	    Scales the resolution of the rest field.  Using a lower
	    resolution rest field both reduces memory requirements of
	    the rest field and also stiffens the rest field. 

	Velocity Sampling:
	    Controls the sampling pattern of the velocity field.  If
	    center sampling is used, the faster but less accurate
	    Gauss Seidel iterations will be used by the Project Non
	    Divergent.  Also, application of VOP networks can be
	    accelerated as the components of the velocity field will
	    line up.  If Face sampling is set the PCG method will be
	    used for projection.  The other modes are available for
	    completeness with what the VectorField DOP provides.

	[Include:standard_fluidpositionpath]

    == Fields ==

    While every attempt is made to ensure unused fields have a minimal
    footprint, for some applications it may be necessary to
    minimize the number of extra fields created.  Each field can be
    disabled from this list.  

    NOTE:
        The smoke and pyro solvers may expect these fields and stop working if they are missing.

    == Slice ==
	[Include:standard_gas_slice]

@inputs
    First:
        The simulation objects to turn into Smoke objects by attaching
        the appropriate data.
@outputs
    First:
        The Smoke object created by this node is sent through the
        single output.
@locals
    [Include:standard_locals]


@related
    - [Node:dop/smokeobject]
    - [Node:dop/smokesolver]
    - [Node:dop/scalarfieldvisualization]
    - [Node:dop/vectorfieldvisualization]

