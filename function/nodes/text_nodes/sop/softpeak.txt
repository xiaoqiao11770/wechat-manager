#type: node
#context: sop
#internal: softpeak
#icon: SOP/softpeak

#tags: reshape, model, normals

= Soft Peak =

"""Moves the selected point along its normal, with smooth rolloff to
surrounding points."""

Unlike the [Peak node|Node:sop/peak],
Soft Peak takes into account a rolloff function and a
radius of influence. The points within radius distance to the selected
point or group will be displaced by an amount proportional to the distance,
similar to the [Soft Transform node|Node:sop/softxform]


@parameters
    Group:
        Subset of points to translate.
    Distance:
        #channels: /dist

        Distance along normal by which to translate
    Soft Radius:
        #channels: /radius

        Area of influence
    Soft Type:
        Type of rolloff function
    Tangent Angles:
        #channels: /tandeg

        Angles of the cubic rolloff function's tangents. The first value
        applies to the tangent farthest from the source point, the
        second applies to the tangent closest to the source point.
    Kernel Function:
        [Metaball
        kernel|/nodes/sop/metaball#kernels]  to use
        when rolloff Type is "Meta-ball"
    Ignore point connectivity:
        Soft-displace only points connected to the points in the group,
        or all points within the radius of influence
    Translate Along Lead Normal:
        Translate points within the radius along the normal of the
        point in Group closest to them. Otherwise translate along their
        respective normals, giving a mushrooming effect.
    Recompute Point Normals:
        Recomputes point normals if they exist.
    Visualize Falloff:
        When to output the soft radius falloff as a `vis_falloff` point
        attribute.

        Never:
            Never create or write to the `vis_falloff` attribute.
        Always:
            Always create and write to the `vis_falloff` attribute. 
        When Viewport Tool Is Active:
            Only create or write to the `vis_falloff` attribute temporarily
            when the viewport tool for this node is active.
@locals
    NPT:
        The number of points.
    NPR:
        The number of primitives.

@related
    - [Node:sop/peak]
    - [Node:sop/softxform]
    - [Node:sop/xform]
    - [Node:sop/clay]
    - [Node:sop/point]

