= Ocean Spectrum =

#type: node
#context: sop
#icon: SHELF/wave
#internal: oceanspectrum

"""Generates volumes containing information for simulating ocean waves."""

This node creates volumes containing information modeling the effect of constant wind and tidal pull on ocean waves over time. You can then wire into the [Ocean Evaluate node|Node:sop/oceanevaluate] to animate ocean surface geometry.

Specifically, this node generates three named volumes that [Ocean Evaluate|Node:sop/oceanevaluate] expects in its second input.

`phase`:
    The phase offset of each wave.

`frequency`:
    The angular frequency of each wave.

`amplitude`:
    The amplitude of each wave.

The `amplitude` volume primitive can have an optional `chop` attribute that controls the choppiness of the ocean, as specified by the __Chop__ parameter.

@parameters

Resolution Exponent:
	The resolution exponent of the 2D Volumes generated by this SOP. Higher resolution volumes add higher frequencies to the ocean and are more expensive to evaluate.  All volume resolutions are powers of two, so the final voxel resolution will be `pow(2, resolution)`, e.g. a value of 8 yields a voxel resolution of 256 x 256. 

Grid Size:
	The world space size of the generated ocean spectrum,  centered at the origin.

Depth:
	The depth of the ocean.  The waves in deep oceans have a strong dispersion relationship, meaning the large, low-frequency waves move faster than the smaller waves.  Decreasing this parameter reduces the amount of dispersion and causes more uniformity in wave speed.

Gravity:
	The standard gravitational force.

Seed:
	The seed for generating the phase offsets and __Random Distribution__ of the ocean spectrum.

Loop Over Time:
	When enabled the ocean waves will loop over the time specified by __Time Period__.  Very short time periods can cause quantization artifacts in the generated waves.

Loop Period:
	The length of the looping period in seconds when __Loop Over Time__ is enabled.

== Wind == (wind)

Direction:
	The wind direction in degrees, with zero being along the X-axis.

Speed:
	The wind speed. Higher wind speeds create larger low-frequency waves and generally increase the dynamic range of the ocean spectrum.

Directional Bias:
	The amount that the waves will align with the wind direction.  As this parameter increases, waves that don't align with the wind will be dampened.

Directional Movement:
	The amount that waves will move in the same direction as the wind.  When this value is low, the ocean will contain waves that are aligned with the wind, but moving in the opposite direction from the wind.  Increasing this value will dampen those waves, leaving only those moving in the same direction.

Chop:
	The amount of sharp cusps the waves will have.  Increasing this value too high can cause the waves to become too peaked and invert on themselves.

== Wave Amplitude == (amplitude)

Normalize:
	The ocean spectrum is shaped by reducing the amplitude of waves traveling in unwanted directions, which causes the overall height of the ocean to change as the waves are shaped. Normalizing maintains consistent wave heights as the various shaping parameters are modified.  When this parameter is enabled the only shaping parameters that affect wave height are the wind __Speed__, which affects dynamic range, and amplitude __Scale__, which affects overall amplitude gain.

Reference Wind:
	The reference wind used for normalizing the overall wave height.  Should only be changed if the units of your scene are changing.

Scale:
	A constant gain by which to scale all the wave amplitudes.

Random Distribution:
	The random distribution used to scale the wave amplitudes after the shaping parameters have been applied.
	
	None:
		No random values are applied to the amplitudes.  This setting is useful for post-multiplying the `amplitude` volume with custom values before they are evaluated with [Ocean Evaluate|Node:sop/oceanevaluate].
	Uniform:
		Use a uniform random distribution, which gives amplitude to many wave frequencies across the spectrum.
	Gaussian:
		Use a Gaussian random distribution, which tends to be the best match to experimental models of ocean spectra.
	Log Normal:
		Use a Log Normal distribution, which gives higher amplitudes to fewer wave frequencies.

Min Wavelength:
	Dampen any waves with a smaller wavelength than this value, which can help with aliasing of very small waves at very high resolution.

Remap Amplitude:
	Modify the output wave amplitudes with a ramp.

Max Remap Resolution:
	The resolution of the highest wave frequency represented on the __Amplitude Ramp__.  Having this fixed allows a ramp to always affect the same frequencies even as the overall resolution of the ocean is changed.  Alternatively this can be channel-referenced to the __Resolution__ parameter.

Amplitude Ramp:
	A ramp applied to the amplitudes of the wave frequencies in the spectrum, with low frequency on the left and high frequency on the right, up to the highest frequency specified by __Max Remap Resolution__.

Visualize Spectrum:
	Visualize the amplitude of the output spectrum, with low frequencies in the middle of the plane.

Visualization Ramp:
	The color ramp used to visualize the spectrum.

Visualization Range:
	The minimum and maximum amplitude values to visualize in the spectrum. 

@related

* [Ocean Evaluate|Node:sop/oceanevaluate]
* [Wave Vector|Node:vop/wavevector]
* [Volume FFT|Node:sop/volumefft]

