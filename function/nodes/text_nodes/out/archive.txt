#type: node
#context: out
#internal: archive
#icon: ROP/archive

= Archive Generator =

"""Generates disk-based archives which can be
used by either mantra or RIB renderers."""

Archives allow Houdini to be more
efficient when generating scripts for renderers since: a) Houdini can
have different geometry displayed b) Houdini doesn't have to send the
geometry down to the renderer every frame.

Mantra archives are stored as geometry files (typically `.bgeo` files)
and material archive files.

RenderMan archives will contain geometry exactly as it would appear in a
RIB file generated by the RenderMan output driver. This means that
sub-division surfaces, curves, points etc. will be output rather than
the default geometry saved by .geo to .rib conversion.

Arguments may be passed to the script and variable expansion is done
before calling the script.

@parameters

Save to Disk:
    Begins generation of archives.
Frame Range:
    Generate archives for multiple frames.
Renderer:
    Which renderer the archives are intended for.
Camera:
    When generating RIB archives, motion blur can be "baked" into
    the archive. The motion blur parameters are picked up from the
    camera.
Visible Objects:
    List of objects which should be included in the archive. When
    generating mantra archives, all objects are merged into a single
    .bgeo file. Care must be taken with regards to differing
    attributes in different geometries.
Unload SOPs:
    Unload SOP geometry after used by the render.
Transform Object:
    This field specifies the "origin" or "frame of reference" that
    all objects in the archive will be relative to. If the field is
    left blank, objects will be output relative to the world
    origin.
Use Display SOP:
    Use the display SOP instead of the Render SOP.
Initialize Simulation OPs:
    Forces all simulation OPs to be reset. This includes DOP
    Networks, POP SOPs, and other OPs that cache their results.
Binary Script:
    Outputs binary files where possible.
Script File:
    Filename of the archive to create.
Motion Blur:
    Specifies whether motion blur is allowed. If set to set to
    disallow, motion blur is globally turned off regardless of
    individual object settings. The Explicit option is only
    implemented for RIB files. This option causes motion blur output
    in the RIB to be independently determined by the motion blur
    settings of the rendering camera/light and individual geometry
    objects.
Motion Blur Type:
    The default motion blur type for rendering. This can be
    overridden by an individual object. Currently, this is only
    implemented for RIB files, since mantra will blur between
    multiple geometry files with deformation blur (or use the
    velocity attribute stored in the geometry file if required).
Mantra SHOP References:
    Hardening SHOP references will cause the shader strings
    associated with the SHOP to be evaluated and stored in the
    archive. If the SHOP references variables like `$OBJ`, this may be
    required.

    NOTE: Point attribute indirect references are handled
    differently and are not considered when de-referencing indirect
    SHOPs.

RIB Version:
    Output RIB for the target version of RIB.
RIB Allow Nested Archives:
    If an object chosen is set to render using an archive, nesting
    archives will output the referenced archive into the created
    archive. If this option is turned off, then the geometry for the
    object will be output instead.
RIB RiCurve Basis:
    Curve bases used for generating open polygons.
Pre-Render Script:
    Execute this script before any rendering.
Pre-Frame Script:
    Execute this script before each frame.
Post-Frame Script:
    Execute this script after each frame.
Post-Render Script:
    Execute this script after all rendering.
    
@locals

N:
    The current frame of the range specified. This always starts at
    1.
NRENDER:
    Total number of frames being rendered.

@related

- [Node:out/ifd]
- [Node:out/rib]

